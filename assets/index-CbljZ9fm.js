import{d as F,m as j,r as a,u as W,a as X,o as G,b as H,c as l,g as A,w as I,e as J,f as K,h as w,i as Y,j as q,k as Z,l as ee,n as O,T as se,p as re,q as _,s as oe,t as te,v as T,x as ne,F as ae}from"./index-Ci0aUN_F.js";const ue="ULoaderProgress",ie=99,p=150,V={progress:{base:"top-0 left-0 right-0 fixed transition-all ease-linear bg-{color}",variants:{size:{xs:"h-px",sm:"h-0.5",md:"h-[3px]",lg:"h-1"},error:{true:"bg-error"}}},defaults:{color:"primary",size:"md",loading:void 0}},le=["data-test"],ce=F({inheritAttrs:!1,__name:"ULoaderProgress",props:j({color:{},resources:{},size:{},loading:{type:Boolean},config:{},dataTest:{}},{...re(V,ue),resources:()=>""}),setup(m,{expose:P}){const r=m,c=a(!1),t=a(!1),o=a(0),u=a(1),f=a(null),B=W("progress-bar"),{requestQueue:d,loaderProgressOff:C,loaderProgressOn:R}=X();G(()=>{window.__VuelessProgressLoaderInstance===void 0&&(window.__VuelessProgressLoaderInstance=0),window.__VuelessProgressLoaderInstance||(window.addEventListener("loaderProgressOn",L),window.addEventListener("loaderProgressOff",h)),window.__VuelessProgressLoaderInstance+=1}),H(()=>{window.__VuelessProgressLoaderInstance!==void 0&&(window.__VuelessProgressLoaderInstance-=1,window.__VuelessProgressLoaderInstance||(delete window.__VuelessProgressLoaderInstance,window.removeEventListener("loaderProgressOn",L),window.removeEventListener("loaderProgressOff",h)))});function L(s){R(s.detail.resource)}function h(s){C(s.detail.resource)}const n=l(()=>typeof f.value=="number"),k=l(()=>({width:`${o.value}%`,opacity:`${u.value}`})),M=l(()=>Array.isArray(r.resources)?r.resources.map(A):[A(r.resources)]),y=l(()=>{const s=r.resources==="any"&&d.value.length,e=M.value.some(i=>d.value.includes(i));return s||e});I(()=>d,U,{immediate:!0,deep:!0}),I(()=>r.loading,()=>r.loading?g():v());function U(){r.loading===void 0&&(y.value&&!n.value?g():!y.value&&n.value&&t.value&&v())}function N(){u.value=0,o.value=0}function S(s,e){u.value=1,e()}function z(){b()}function E(){setTimeout(()=>{n.value&&(D(),E())},100)}function b(){f.value=o.value===100?null:o.value,E()}function g(){t.value?b():t.value=!0}function x(s){let e;n.value?e=s<o.value?_(s,0,100):_(s,.8,100):e=0,f.value=e===100?null:e,oe(i=>{o.value=e,setTimeout(e===100?()=>{u.value=0,setTimeout(()=>{t.value=!1,c.value=!1,i()},p)}:i,p)})}function D(s){const e=o.value;e<100&&typeof s!="number"&&(e>=0&&e<25?s=4:e>=25&&e<50?s=3:e>=50&&e<75?s=2:e>=75&&e<90?s=1:e>=90&&e<95?s=.5:s=.05),x(_(e+(s||0),0,ie))}function v(){x(100)}P({start:g,stop:v,isLoading:n,progressRef:B});const{getDataTest:Q,progressAttrs:$}=J(V);return(s,e)=>(w(),K(se,{css:!1,onBeforeEnter:N,onEnter:S,onAfterEnter:z},{default:Y(()=>[t.value?(w(),q("div",ee({key:0,ref:"progress-bar"},O($),{"data-test":O(Q)(),style:k.value}),null,16,le)):Z("",!0)]),_:1}))}}),fe={};function de(m,P){const r=ce,c=ne("router-view");return w(),q(ae,null,[T(r,{resources:"any",class:"z-60"}),T(c)],64)}const ve=te(fe,[["render",de]]);export{ve as default};
